[gd_scene load_steps=2 format=3 uid="uid://damage_number"]

[sub_resource type="GDScript" id="1"]
script/source = "extends Control

var velocity: Vector2 = Vector2(0, -80)
var lifetime: float = 1.0
var timer: float = 0.0

func setup(damage: int, is_heal: bool = false, is_crit: bool = false) -> void:
	var label := $Label as Label

	if is_crit:
		label.text = \"CRIT!\"
		label.add_theme_color_override(\"font_color\", Color.YELLOW)
		label.add_theme_font_size_override(\"font_size\", 24)
	elif is_heal:
		label.text = \"+\" + str(damage)
		label.add_theme_color_override(\"font_color\", Color.GREEN)
	else:
		label.text = str(damage)
		label.add_theme_color_override(\"font_color\", Color.RED)

	# Random horizontal offset
	velocity.x = randf_range(-30, 30)

func _process(delta: float) -> void:
	timer += delta
	position += velocity * delta
	velocity.y += 200 * delta  # Gravity

	# Fade out
	modulate.a = 1.0 - (timer / lifetime)

	if timer >= lifetime:
		queue_free()
"

[node name="DamageNumber" type="Control"]
size_flags_horizontal = 0
size_flags_vertical = 0
script = SubResource("1")

[node name="Label" type="Label" parent="."]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -50.0
offset_top = -15.0
offset_right = 50.0
offset_bottom = 15.0
grow_horizontal = 2
grow_vertical = 2
text = "100"
horizontal_alignment = 1
vertical_alignment = 1
